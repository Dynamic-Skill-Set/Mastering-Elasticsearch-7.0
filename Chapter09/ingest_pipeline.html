<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>chapter9</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1671.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 10.0px 0.0px; line-height: 41.0px; font: 36.0px Times; color: #0f0f0f; -webkit-text-stroke: #0f0f0f}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #0f0f0f; -webkit-text-stroke: #0f0f0f}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #383838; -webkit-text-stroke: #383838}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 18.0px Times; color: #0f0f0f; -webkit-text-stroke: #0f0f0f}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #0f0f0f; -webkit-text-stroke: #0f0f0f; background-color: #ededed}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #0f0f0f; -webkit-text-stroke: #0f0f0f}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #d1d1d1; -webkit-text-stroke: #d1d1d1}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Courier; color: #383838; -webkit-text-stroke: #383838; background-color: #111111}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Courier; color: #1b5e0c; -webkit-text-stroke: #1b5e0c; background-color: #111111}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Courier; color: #383838; -webkit-text-stroke: #1b5e0c; background-color: #111111}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Courier; color: #232425; -webkit-text-stroke: #232425; background-color: #111111}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #a9a9a9; -webkit-text-stroke: #a9a9a9}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #a9a9a9; -webkit-text-stroke: #a9a9a9; background-color: #ffffff}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 16.0px; font: 12.0px Monaco; color: #eeefe0; -webkit-text-stroke: #eeefe0; background-color: #111111}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 16.0px Times; color: #c5001a; -webkit-text-stroke: #c5001a}
    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 16.0px Times; color: #db5912; -webkit-text-stroke: #db5912}
    p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 16.0px Times; color: #238416; -webkit-text-stroke: #238416}
    p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 16.0px Times; color: #1a30ba; -webkit-text-stroke: #1a30ba}
    p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 17.0px; font: 14.0px Times; color: #111111; -webkit-text-stroke: #111111; background-color: #e6e6e6}
    p.p20 {margin: 0.0px 10.0px 0.0px 0.0px; line-height: 14.0px; font: 12.0px Times; color: #0f0f0f; -webkit-text-stroke: #0f0f0f; background-color: #d5d5d5}
    span.s1 {font-kerning: none}
    span.s2 {font: 16.0px Times; font-kerning: none; color: #1a30ba; -webkit-text-stroke: 0px #1a30ba}
    span.s3 {font-kerning: none; color: #232425; -webkit-text-stroke: 0px #232425}
    span.s4 {font-kerning: none; color: #383838}
    span.s5 {font-kerning: none; color: #1b5e0c}
    span.s6 {font-kerning: none; -webkit-text-stroke: 0px #383838}
    span.s7 {font-kerning: none; color: #383838; -webkit-text-stroke: 0px #383838}
    span.s8 {font: 16.0px Times; font-kerning: none; color: #c5001a; -webkit-text-stroke: 0px #c5001a}
    span.s9 {font: 16.0px Times; font-kerning: none; color: #db5912; -webkit-text-stroke: 0px #db5912}
    span.s10 {font: 16.0px Times; font-kerning: none; color: #238416; -webkit-text-stroke: 0px #238416}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1"><span class="s1">chapter9</span></p>
<p class="p2"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p4"><span class="s2">PUT</span><span class="s1"> create_pipeline_range_ratio </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/range_ratio</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s3">{</span><span class="s1">   </span></p>
<p class="p9"><span class="s4">       </span><span class="s1">"description"</span><span class="s3">:</span><span class="s1">"calculate the range of high and low and divide by the close price"</span><span class="s3">,</span></p>
<p class="p9"><span class="s4">       </span><span class="s1">"processors"</span><span class="s3">:[</span></p>
<p class="p8"><span class="s1">              </span><span class="s3">{</span></p>
<p class="p10"><span class="s1">                      </span><span class="s5">"script"</span><span class="s3">:</span><span class="s6"> </span><span class="s3">{</span></p>
<p class="p9"><span class="s4">                             </span><span class="s1">"source"</span><span class="s3">:</span><span class="s7"> </span><span class="s1">"ctx.range_ratio = (ctx.high-ctx.low)/ctx.close"</span></p>
<p class="p8"><span class="s1">                      </span><span class="s3">}</span></p>
<p class="p8"><span class="s1">              </span><span class="s3">}</span></p>
<p class="p8"><span class="s1">       </span><span class="s3">]</span></p>
<p class="p11"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">create_pipeline_range_ratio</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request PUT "http://localhost:9200/_ingest/pipeline/range_ratio" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"description\":\"calculate the range of high and low and divide by the close price\", \"processors\":[ { \"script\": { \"source\": \"ctx.range_ratio = (ctx.high-ctx.low)/ctx.close\" } } ] }'}’</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p15"><span class="s1"> </span></p>
<p class="p4"><span class="s8">DEL</span><span class="s1"> delete_pipeline_range_ratio </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/range_ratio</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "description":"calculate the range of high and low and divide by the close price",</span></p>
<p class="p8"><span class="s1">       "processors":[</span></p>
<p class="p8"><span class="s1">              {</span></p>
<p class="p8"><span class="s1">                      "set": {</span></p>
<p class="p8"><span class="s1">                             "field": "range_ratio",</span></p>
<p class="p8"><span class="s1">                             "value": "({{high}}-{{low}})/{{close}}"</span></p>
<p class="p8"><span class="s1">                      }</span></p>
<p class="p8"><span class="s1">              }</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">delete_pipeline_range_ratio</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request DELETE "http://localhost:9200/_ingest/pipeline/range_ratio" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"description\":\"calculate the range of high and low and divide by the close price\", \"processors\":[ { \"set\": { \"field\": \"range_ratio\", \"value\": \"({{high}}-{{low}})/{{close}}\" } } ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p15"><span class="s1"> </span></p>
<p class="p4"><span class="s8">DEL</span><span class="s1"> delete_pipeline_wildcard_expression </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/range_ratio*</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "description":"calculate the range of high and low and divide by the close price",</span></p>
<p class="p8"><span class="s1">       "processors":[</span></p>
<p class="p8"><span class="s1">              {</span></p>
<p class="p8"><span class="s1">                      "set": {</span></p>
<p class="p8"><span class="s1">                             "field": "range_ratio",</span></p>
<p class="p8"><span class="s1">                             "value": "({{high}}-{{low}})/{{close}}"</span></p>
<p class="p8"><span class="s1">                      }</span></p>
<p class="p8"><span class="s1">              }</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">delete_pipeline_wildcard_expression</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request DELETE "http://localhost:9200/_ingest/pipeline/range_ratio*" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"description\":\"calculate the range of high and low and divide by the close price\", \"processors\":[ { \"set\": { \"field\": \"range_ratio\", \"value\": \"({{high}}-{{low}})/{{close}}\" } } ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_range_ratio </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/range_ratio/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"date": "2018-12-26",<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"open": 24.8706,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"high": 25.6553,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"low": 24.7117,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"close": 25.6553,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"volume": 422158,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"change": 0.84425,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"changePercent": 3.403,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"label": "Dec 26, 18",<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"changeOverTime": 0,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"symbol": "ACWF"</span></p>
<p class="p8"><span class="s1">}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_range_ratio</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/range_ratio/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"docs\" :[ {\"_source\": {\"date\": \"2018-12-26\", \"open\": 24.8706, \"high\": 25.6553, \"low\": 24.7117, \"close\": 25.6553, \"volume\": 422158,<span class="Apple-converted-space">  </span>\"change\": 0.84425, \"changePercent\": 3.403,<span class="Apple-converted-space">  </span>\"label\": \"Dec 26, 18\", \"changeOverTime\": 0, \"symbol\": \"ACWF\"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_ad_hoc_range_ratio </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"calculate the range of high and low and divide by the close price",</span></p>
<p class="p8"><span class="s1">              "processors":[{</span></p>
<p class="p8"><span class="s1">                      "script": {</span></p>
<p class="p8"><span class="s1">                             "source": "ctx.range_ratio = (ctx.high-ctx.low)/ctx.close"</span></p>
<p class="p8"><span class="s1">                      }</span></p>
<p class="p8"><span class="s1">              }]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"date": "2018-12-26", "open": 24.8706, "high": 25.6553, "low": 24.7117, "close": 25.6553, "volume": 422158, "unadjustedVolume": 422158, "change": 0.84425, "changePercent": 3.403, "vwap": 25.2926, "label": "Dec 26, 18", "changeOverTime": 0, "symbol": "ACWF"}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_ad_hoc_range_ratio</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"calculate the range of high and low and divide by the close price\", \"processors\":[{ \"script\": { \"source\": \"ctx.range_ratio = (ctx.high-ctx.low)/ctx.close\" } }] }, \"docs\" :[ {\"_source\": {\"date\": \"2018-12-26\", \"open\": 24.8706, \"high\": 25.6553, \"low\": 24.7117, \"close\": 25.6553, \"volume\": 422158,<span class="Apple-converted-space">  </span>\"change\": 0.84425, \"changePercent\": 3.403,<span class="Apple-converted-space">  </span>\"label\": \"Dec 26, 18\", \"changeOverTime\": 0, \"symbol\": \"ACWF\"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> index_with_pipeline_range_ratio </span></p>
<p class="p5"><span class="s1">http://localhost:9200/cf_etf_pipeline/_doc/1?pipeline=range_ratio</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">PARAMS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">pipeline</span></p>
<p class="p6"><span class="s1">range_ratio</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"date": "2018-12-26",<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"open": 24.8706,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"high": 25.6553,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"low": 24.7117,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"close": 25.6553,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"volume": 422158,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"change": 0.84425,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"changePercent": 3.403,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"label": "Dec 26, 18",<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"changeOverTime": 0,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"symbol": "ACWF"</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">index_with_pipeline_range_ratio</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/cf_etf_pipeline/_doc/1?pipeline=range_ratio" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"date\": \"2018-12-26\", \"open\": 24.8706, \"high\": 25.6553, \"low\": 24.7117, \"close\": 25.6553, \"volume\": 422158,<span class="Apple-converted-space">  </span>\"change\": 0.84425, \"changePercent\": 3.403,<span class="Apple-converted-space">  </span>\"label\": \"Dec 26, 18\", \"changeOverTime\": 0, \"symbol\": \"ACWF\"}'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p15"><span class="s1"> </span></p>
<p class="p4"><span class="s8">DEL</span><span class="s1"> index_with_pipeline_range_ratio_doc </span></p>
<p class="p5"><span class="s1">http://localhost:9200/cf_etf_pipeline/_doc/1</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"date": "2018-12-26",<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"open": 24.8706,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"high": 25.6553,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"low": 24.7117,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"close": 25.6553,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"volume": 422158,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"change": 0.84425,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"changePercent": 3.403,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"label": "Dec 26, 18",<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"changeOverTime": 0,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>"symbol": "ACWF"</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">index_with_pipeline_range_ratio_doc</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request DELETE "http://localhost:9200/cf_etf_pipeline/_doc/1" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"date\": \"2018-12-26\", \"open\": 24.8706, \"high\": 25.6553, \"low\": 24.7117, \"close\": 25.6553, \"volume\": 422158,<span class="Apple-converted-space">  </span>\"change\": 0.84425, \"changePercent\": 3.403,<span class="Apple-converted-space">  </span>\"label\": \"Dec 26, 18\", \"changeOverTime\": 0, \"symbol\": \"ACWF\"}'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p17"><span class="s1"> </span></p>
<p class="p4"><span class="s10">GET</span><span class="s1"> get_document_from_index_with_pipeline_range_ratio </span></p>
<p class="p5"><span class="s1">http://localhost:9200/cf_etf_pipeline/_doc/1</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1"> </span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">get_document_from_index_with_pipeline_range_ratio</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request GET "http://localhost:9200/cf_etf_pipeline/_doc/1"</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_ad_hoc_kv_processor </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"kv processor demo",</span></p>
<p class="p8"><span class="s1">              "processors":[</span></p>
<p class="p8"><span class="s1">                      {"kv": {</span></p>
<p class="p8"><span class="s1">                             "field": "input_field",</span></p>
<p class="p8"><span class="s1">                             "field_split":",",</span></p>
<p class="p8"><span class="s1">                             "value_split":":",</span></p>
<p class="p8"><span class="s1">                             "target_field": "output_field",</span></p>
<p class="p8"><span class="s1">                             "trim_key":" ",</span></p>
<p class="p8"><span class="s1">                             "trim_value":" "</span></p>
<p class="p8"><span class="s1">                      }},</span></p>
<p class="p8"><span class="s1">                      { "remove" : { "field": ["input_field"]}}</span></p>
<p class="p8"><span class="s1">              ]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"input_field":" a:b , c:d "}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_ad_hoc_kv_processor</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"kv processor demo\", \"processors\":[ {\"kv\": { \"field\": \"input_field\", \"field_split\":\",\", \"value_split\":\":\", \"target_field\": \"output_field\", \"trim_key\":\" \", \"trim_value\":\" \" }}, { \"remove\" : { \"field\": [\"input_field\"]}} ] }, \"docs\" :[ {\"_source\": {\"input_field\":\" a:b , c:d \"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_grok_processor </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"grok processor demo",</span></p>
<p class="p8"><span class="s1">              "processors":[</span></p>
<p class="p8"><span class="s1">                      {"grok": {</span></p>
<p class="p8"><span class="s1">                     "field": "message",</span></p>
<p class="p8"><span class="s1">                "patterns": ["\\[%{TIMESTAMP_ISO8601:timestamp}\\]\\[%{LOGLEVEL:log-level}%{SPACE}\\]\\[%{JAVACLASS:class}\\]%{SPACE}\\[%{DATA:node}\\]%{SPACE}\\[%{DATA:index_doc}\\]%{GREEDYDATA:action}"],</span></p>
<p class="p8"><span class="s1">                "ignore_missing": true</span></p>
<p class="p8"><span class="s1">                      }},</span></p>
<p class="p8"><span class="s1">                      {"remove": {"field":["message"]}}</span></p>
<p class="p8"><span class="s1">              ]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"message":"[2019-06-20T00:04:58,856][INFO ][o.e.c.m.MetaDataDeleteIndexService] [WTW.local] [cf_etf/RiYRsKyxTGStNcHczbUxcQ] deleting index"}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_grok_processor</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"grok processor demo\", \"processors\":[ {\"grok\": { \"field\": \"message\", \"patterns\": [\"\\\\[%{TIMESTAMP_ISO8601:timestamp}\\\\]\\\\[%{LOGLEVEL:log-level}%{SPACE}\\\\]\\\\[%{JAVACLASS:class}\\\\]%{SPACE}\\\\[%{DATA:node}\\\\]%{SPACE}\\\\[%{DATA:index_doc}\\\\]%{GREEDYDATA:action}\"], \"ignore_missing\": true }}, {\"remove\": {\"field\":[\"message\"]}} ] }, \"docs\" :[ {\"_source\": {\"message\":\"[2019-06-20T00:04:58,856][INFO ][o.e.c.m.MetaDataDeleteIndexService] [WTW.local] [cf_etf/RiYRsKyxTGStNcHczbUxcQ] deleting index\"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_dissect_processor </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"dissect processor demo",</span></p>
<p class="p8"><span class="s1">              "processors":[</span></p>
<p class="p8"><span class="s1">                      {"dissect": {</span></p>
<p class="p8"><span class="s1">                     "field": "message",</span></p>
<p class="p8"><span class="s1">                "pattern": </span></p>
<p class="p8"><span class="s1">                "[%{timestamp}][%{log-level}][%{class}] [%{node}] [%{index_doc}]%{action}",</span></p>
<p class="p8"><span class="s1">                "ignore_missing": true</span></p>
<p class="p8"><span class="s1">                      }},</span></p>
<p class="p8"><span class="s1">                      {"remove": {"field":["message"]}}</span></p>
<p class="p8"><span class="s1">              ]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"message":"[2019-06-20T00:04:58,856][INFO ][o.e.c.m.MetaDataDeleteIndexService] [WTW.local] [cf_etf/RiYRsKyxTGStNcHczbUxcQ] deleting index"}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_dissect_processor</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"dissect processor demo\", \"processors\":[ {\"dissect\": { \"field\": \"message\", \"pattern\": \"[%{timestamp}][%{log-level}][%{class}] [%{node}] [%{index_doc}]%{action}\", \"ignore_missing\": true }}, {\"remove\": {\"field\":[\"message\"]}} ] }, \"docs\" :[ {\"_source\": {\"message\":\"[2019-06-20T00:04:58,856][INFO ][o.e.c.m.MetaDataDeleteIndexService] [WTW.local] [cf_etf/RiYRsKyxTGStNcHczbUxcQ] deleting index\"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_simple_conditional_execution </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"remove the rating field is the rating is equal to a single space string",</span></p>
<p class="p8"><span class="s1">              "processors":[{</span></p>
<p class="p8"><span class="s1">                      "remove": {</span></p>
<p class="p8"><span class="s1">                             "field": "rating",</span></p>
<p class="p8"><span class="s1">                             "if": "ctx.rating == ' '"</span></p>
<p class="p8"><span class="s1">                      }</span></p>
<p class="p8"><span class="s1">              }]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"symbol":"AGT","fund_name":"iShares MSCI Argentina and Global Exposure ETF","rating":" ","morningstar_category":"Miscellaneous Region","category":"International","family":"iShares","market_cap":"mid","description":"The investment seeks to track the investment results of the MSCI All Argentina 25\/50 Index (the \\\"underlying index\\\").\\n The fund generally will invest at least 90% of its assets in the component securities of the underlying index and in investments that have economic characteristics that are substantially identical to the component securities of the underlying index. The index is designed to measure the broad Argentina equity universe, while including a minimum number of constituents, as defined by MSCI, Inc. (the \\\"index provider\\\" or \\\"MSCI\\\"). The fund is non-diversified.","exchange":"Cboe Global Markets EDGX"}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_simple_conditional_execution</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"remove the rating field is the rating is equal to a single space string\", \"processors\":[{ \"remove\": { \"field\": \"rating\", \"if\": \"ctx.rating == \' \'\" } }] }, \"docs\" :[ {\"_source\": {\"symbol\":\"AGT\",\"fund_name\":\"iShares MSCI Argentina and Global Exposure ETF\",\"rating\":\" \",\"morningstar_category\":\"Miscellaneous Region\",\"category\":\"International\",\"family\":\"iShares\",\"market_cap\":\"mid\",\"description\":\"The investment seeks to track the investment results of the MSCI All Argentina 25\\/50 Index (the \\\\\\\"underlying index\\\\\\\").\\\ The fund generally will invest at least 90% of its assets in the component securities of the underlying index and in investments that have economic characteristics that are substantially identical to the component securities of the underlying index. The index is designed to measure the broad Argentina equity universe, while including a minimum number of constituents, as defined by MSCI, Inc. (the \\\\\\\"index provider\\\\\\\" or \\\\\\\"MSCI\\\\\\\"). The fund is non-diversified.\",\"exchange\":\"Cboe Global Markets EDGX\"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> get_document_empty_rating_from_cf_etf </span></p>
<p class="p5"><span class="s1">http://localhost:9200/cf_etf/_search</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "query": {</span></p>
<p class="p8"><span class="s1">              "match": {</span></p>
<p class="p8"><span class="s1">                      "symbol":"AGT"</span></p>
<p class="p8"><span class="s1">              }</span></p>
<p class="p8"><span class="s1">       }</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">get_document_empty_rating_from_cf_etf</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/cf_etf/_search" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"query\": { \"match\": { \"symbol\":\"AGT\" } } }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_conditional_execution_null_safe_operator </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"calculate the range of high and low and divide by the close price",</span></p>
<p class="p8"><span class="s1">              "processors":[</span></p>
<p class="p8"><span class="s1">                      {"set":{</span></p>
<p class="p8"><span class="s1">                             "field": "new_id",</span></p>
<p class="p8"><span class="s1">                             "value": "{{id}}",</span></p>
<p class="p8"><span class="s1">                             "if": "ctx.parent?.child != null"</span></p>
<p class="p8"><span class="s1">                      }}</span></p>
<p class="p8"><span class="s1">              ]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"id":1, "parent": {"child":"value"}}},</span></p>
<p class="p8"><span class="s1">              {"_source": {"id":2, "parent": {}}},</span></p>
<p class="p8"><span class="s1">              {"_source": {"id":3}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_conditional_execution_null_safe_operator</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"calculate the range of high and low and divide by the close price\", \"processors\":[ {\"set\":{ \"field\": \"new_id\", \"value\": \"{{id}}\", \"if\": \"ctx.parent?.child != null\" }} ] }, \"docs\" :[ {\"_source\": {\"id\":1, \"parent\": {\"child\":\"value\"}}}, {\"_source\": {\"id\":2, \"parent\": {}}}, {\"_source\": {\"id\":3}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p18"><span class="s1"> </span></p>
<p class="p4"><span class="s2">PUT</span><span class="s1"> define_for_market_cap__null_processor </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/for_market_cap_null_processor</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "description":"for_market_cap_null_processor",</span></p>
<p class="p8"><span class="s1">       "processors":[</span></p>
<p class="p8"><span class="s1">              {"set":{</span></p>
<p class="p8"><span class="s1">                      "field": "market_cap_type",</span></p>
<p class="p8"><span class="s1">                      "value": "no_market_cap_ETF"</span></p>
<p class="p8"><span class="s1">              }}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">define_for_market_cap__null_processor</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request PUT "http://localhost:9200/_ingest/pipeline/for_market_cap_null_processor" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"description\":\"for_market_cap_null_processor\", \"processors\":[ {\"set\":{ \"field\": \"market_cap_type\", \"value\": \"no_market_cap_ETF\" }} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p18"><span class="s1"> </span></p>
<p class="p4"><span class="s2">PUT</span><span class="s1"> define_for_market_cap_processor </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/for_market_cap_processor</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "description":"for_market_cap_processor",</span></p>
<p class="p8"><span class="s1">       "processors":[</span></p>
<p class="p8"><span class="s1">              {"set":{</span></p>
<p class="p8"><span class="s1">                      "field": "market_cap_type",</span></p>
<p class="p8"><span class="s1">                      "value": "market_cap_ETF"</span></p>
<p class="p8"><span class="s1">              }}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">define_for_market_cap_processor</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request PUT "http://localhost:9200/_ingest/pipeline/for_market_cap_processor" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"description\":\"for_market_cap_processor\", \"processors\":[ {\"set\":{ \"field\": \"market_cap_type\", \"value\": \"market_cap_ETF\" }} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p17"><span class="s1"> </span></p>
<p class="p4"><span class="s10">GET</span><span class="s1"> symbo_bil_market_cap_null_etf </span></p>
<p class="p5"><span class="s1">http://localhost:9200/cf_etf/_search?q=symbol:BIL</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">PARAMS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">q</span></p>
<p class="p6"><span class="s1">symbol:BIL</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">symbo_bil_market_cap_null_etf</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request GET "http://localhost:9200/cf_etf/_search?q=symbol:BIL" --header "Content-Type: application/json" --header "accept: application/json"</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_conditional_execution_switch_case </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"calculate the range of high and low and divide by the close price",</span></p>
<p class="p8"><span class="s1">              "processors":[</span></p>
<p class="p8"><span class="s1">                      {"pipeline":{</span></p>
<p class="p8"><span class="s1">                             "name": "for_market_cap_null_processor",</span></p>
<p class="p8"><span class="s1">                             "if": "ctx.market_cap == null"</span></p>
<p class="p8"><span class="s1">                      }},</span></p>
<p class="p8"><span class="s1">                      {"pipeline":{</span></p>
<p class="p8"><span class="s1">                             "name": "for_market_cap_processor",</span></p>
<p class="p8"><span class="s1">                             "if": "ctx.market_cap != null"</span></p>
<p class="p8"><span class="s1">                      }}</span></p>
<p class="p8"><span class="s1">              ]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">              {"_source": {"id":1, "market_cap": null}},</span></p>
<p class="p8"><span class="s1">              {"_source": {"id":2, "market_cap": "large"}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_conditional_execution_switch_case</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"calculate the range of high and low and divide by the close price\", \"processors\":[ {\"pipeline\":{ \"name\": \"for_market_cap_null_processor\", \"if\": \"ctx.market_cap == null\" }}, {\"pipeline\":{ \"name\": \"for_market_cap_processor\", \"if\": \"ctx.market_cap != null\" }} ] }, \"docs\" :[ {\"_source\": {\"id\":1, \"market_cap\": null}}, {\"_source\": {\"id\":2, \"market_cap\": \"large\"}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p16"><span class="s1"> </span></p>
<p class="p4"><span class="s9">POST</span><span class="s1"> simulate_pipeline_hit_exception_error </span></p>
<p class="p5"><span class="s1">http://localhost:9200/_ingest/pipeline/_simulate</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s1">HEADERS</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p6"><span class="s1">Content-Type</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">accept</span></p>
<p class="p6"><span class="s1">application/json</span></p>
<p class="p6"><span class="s1">BODY</span></p>
<p class="p7"><span class="s1"> </span></p>
<p class="p8"><span class="s1">{   </span></p>
<p class="p8"><span class="s1">       "pipeline": {</span></p>
<p class="p8"><span class="s1">              "description":"test parameter on_failure when error occurs",</span></p>
<p class="p8"><span class="s1">           "processors":[{</span></p>
<p class="p8"><span class="s1">               "remove": {</span></p>
<p class="p8"><span class="s1">                   "field": "rating",</span></p>
<p class="p8"><span class="s1">                   "on_failure": [</span></p>
<p class="p8"><span class="s1">                   {"set": { "field": "error", "value":-1}},</span></p>
<p class="p8"><span class="s1">                            {"set": { "field": "message", "value":"remove processor failure: {{ _ingest.on_failure_message }}"}}</span></p>
<p class="p8"><span class="s1">                      ]</span></p>
<p class="p8"><span class="s1">               }</span></p>
<p class="p8"><span class="s1">           }]</span></p>
<p class="p8"><span class="s1">       },</span></p>
<p class="p8"><span class="s1">       "docs" :[</span></p>
<p class="p8"><span class="s1">           {"_source": {"id":3}}</span></p>
<p class="p8"><span class="s1">       ]</span></p>
<p class="p8"><span class="s1">}</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p12"><span class="s1">Example Request</span></p>
<p class="p13"><span class="s1">simulate_pipeline_hit_exception_error</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p14"><span class="s1">curl --location --request POST "http://localhost:9200/_ingest/pipeline/_simulate" --header "Content-Type: application/json" --header "accept: application/json" --data $'{\"pipeline\": { \"description\":\"test parameter on_failure when error occurs\", \"processors\":[{ \"remove\": { \"field\": \"rating\", \"on_failure\": [ {\"set\": { \"field\": \"error\", \"value\":-1}}, {\"set\": { \"field\": \"message\", \"value\":\"remove processor failure: {{ _ingest.on_failure_message }}\"}} ] } }] }, \"docs\" :[ {\"_source\": {\"id\":3}} ] }'</span></p>
<p class="p14"><span class="s1"> </span></p>
<p class="p19"><span class="s1"> </span></p>
<p class="p20"><span class="s1">CHAPTER9</span></p>
</body>
</html>
